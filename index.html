<!DOCTYPE html>
   <head>
      <meta charset='utf-8'>
      <meta http-equiv="X-UA-Compatible" content="chrome=1">
      <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<!--Tab Title-->
      <title>Smarter Parking</title>
      
      <style>
      html{
         background-image:url('http://imgur.com/XTvu5tk.jpg');
         text-align: center;
         width:100%;
      }
      
      body{
         text-align: center;
         color: #fffaf0;
         width:100%;
      }
      .content-wrapper{
         margin: auto;
         width: 70%;
      }
      
      #content-wrapper{
         background:#000000;
         opacity:0.9;
         }
         
      table {
         border:3px solid white;
         width:60%;
         margin: 0 auto;
         }
         
      td, th{
            border: 3px solid white;
         }
         
      table.level1{
         table-layout: fixed;
         margin-left:auto;
-        margin-right: auto;
         }
      </style>
   </head>
   
<!--Headings-->   
   <body>
      <div class="inner">
      <header>
        <h1>Smarter Parking</h1>
        <h2>Parking has never been easier</h2>
      </div>
      </header>
      
   <div id="content-wrapper">
   <div class="inner clearfix">
   <section id="main-content">
   
      <h3><a name="LEVEL 1 PARKING"></a> LEVEL 1 PARKING</h3>
      <table class="level1">
             <tr>
    <!--Parking Space 1-->
             <td style="text-align:center">1    
                <button type="button"> BOOK </button>
                <canvas id="space1" width="300" height="100"></canvas>
                <form id=book1>
                   Please Enter your credit card number: <input type="text" id="hello1">
                   <button type="button" onclick="checkCredit1()"> SUBMIT </button>
                </form>
             </td>
    <!--Middle Space-->  
             <td rowspan="3" style="width:200px">MIDDLE SPACE HERE</td>
    <!--Parking Space 4-->    
             <td style="text-align:center">4    
                <button type="button"> BOOK </button>
                <canvas id="space4" width="300" height="100"></canvas>
                <form id=book4>
                   Please Enter your credit card number: <input type="text" id="hello4">
                   <button type="button" onclick="checkCredit1()"> SUBMIT </button>
                </form>
             </td>
             </tr>
     
             <tr>
    <!--Parking Space 2-->
             <td style="text-align:center">2    
                <button type="button"> BOOK </button>
                <canvas id="space2" width="300" height="100"></canvas>
                <form id=book2>
                   Please Enter your credit card number: <input type="text" id="hello2">
                   <button type="button" onclick="checkCredit1()"> SUBMIT </button>
                </form>
             </td>
    <!--Middle Space-->  
 
    <!--Parking Space 5-->    
             <td style="text-align:center">5    
                <button type="button"> BOOK </button>
                <canvas id="space5" width="300" height="100"></canvas>
                <form id=book5>
                   Please Enter your credit card number: <input type="text" id="hello5">
                   <button type="button" onclick="checkCredit1()"> SUBMIT </button>
                </form>
             </td>
             </tr>
     
              <tr>
    <!--Parking Space 3-->          
                <td style="text-align:center">3    
                <button type="button"> BOOK </button>
                <canvas id="space3" width="300" height="100"></canvas>
                <form id=book3>
                   Please Enter your credit card number: <input type="text" id="hello3">
                   <button type="button" onclick="checkCredit1()"> SUBMIT </button>
                </form>
             </td>
    <!--Middle Space-->  
 
    <!--Parking Space 6-->    
             <td style="text-align:center">6    
                <button type="button"> BOOK </button>
                <canvas id="space6" width="300" height="100"></canvas>
                <form id=book6>
                   Please Enter your credit card number: <input type="text" id="hello6">
                   <button type="button" onclick="checkCredit1()"> SUBMIT </button>
                </form>
             </td>
          </tr>
     
          </table>
      </div>
      </div>
    </div>
   
   <script src="js/jquery.js"></script>
   <script src="http://d23cj0cdvyoxg0.cloudfront.net/xivelyjs-1.0.4.min.js"></script>
   
   <script>
      
   $(document).ready(function($) {
  
  var feedID        = 1868918819,  
      datastream1ID  = "Sensor1",   datastream2ID  = "Sensor2",   datastream3ID  = "Sensor3",
      datastream4ID  = "Sensor4",   datastream5ID  = "Sensor5",   datastream6ID  = "Sensor6",
      datastream7ID  = "Sensor7",   datastream8ID  = "Sensor8",   datastream9ID  = "Sensor9",
      datastream10ID  = "Sensor10", datastream11ID  = "Sensor11", datastream12ID  = "Sensor12";
      
  xively.setKey( "ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr" );
  
  xively.datastream.get (feedID, datastream1ID, function ( datastream ){
    
       if (datastream["current_value"] == '0'){
        var f1=document.getElementById("space1");
        var f1tx=f1.getContext("2d");
            
        f1tx.clearRect(0,0,space1.width,space1.height);
        f1tx.font = "50px Arial";
        f1tx.strokeStyle="rgb(154,205,50)";
        f1tx.strokeText("FREE",36,50);
            
      } else if(datastream["current_value"] == '1') {
        var t1=document.getElementById("space1");
        var t1tx=t1.getContext("2d");
            
        t1tx.clearRect(0,0,space1.width,space1.height);
        t1tx.font = "50px Arial";
        t1tx.strokeStyle="rgb(154,205,50)";
        t1tx.strokeText("TAKEN",36,50);
            
      } else if(datastream["current_value"] == '2'){
        var b1=document.getElementById("space1");
        var b1tx=b1.getContext("2d");
            
        b1tx.clearRect(0,0,space1.width,space1.height);
        b1tx.font = "50px Arial";
        b1tx.strokeStyle="rgb(154,205,50)";
        b1tx.strokeText("BOOKED",35,50);
      };
      
    xively.datastream.subscribe( feedID, datastream1ID, function ( event , datastream_updated ){
        
      if (datastream_updated["current_value"] == '0'){
        var f1=document.getElementById("space1");
        var f1tx=f1.getContext("2d");
            
        f1tx.clearRect(0,0,space1.width,space1.height);
        f1tx.font = "50px Arial";
        f1tx.strokeStyle="rgb(154,205,50)";
        f1tx.strokeText("FREE",36,50);
            
      } else if(datastream_updated["current_value"] == '1') {
        var t1=document.getElementById("space1");
        var t1tx=t1.getContext("2d");
            
        t1tx.clearRect(0,0,space1.width,space1.height);
        t1tx.font = "50px Arial";
        t1tx.strokeStyle="rgb(154,205,50)";
        t1tx.strokeText("TAKEN",36,50);
            
      } else if(datastream_updated["current_value"] == '2'){
        var b1=document.getElementById("space1");
        var b1tx=b1.getContext("2d");
            
        b1tx.clearRect(0,0,space1.width,space1.height);
        b1tx.font = "50px Arial";
        b1tx.strokeStyle="rgb(154,205,50)";
        b1tx.strokeText("BOOKED",36,50);
      };
      
    });
  });
  
   xively.datastream.get (feedID, datastream4ID, function ( datastream ){
    
       if (datastream["current_value"] == '0'){
        var f1=document.getElementById("space4");
        var f1tx=f1.getContext("2d");
            
        f1tx.clearRect(0,0,space1.width,space1.height);
        f1tx.font = "50px Arial";
        f1tx.strokeStyle="rgb(154,205,50)";
        f1tx.strokeText("FREE",36,50);
            
      } else if(datastream["current_value"] == '1') {
        var t1=document.getElementById("space4");
        var t1tx=t1.getContext("2d");
            
        t1tx.clearRect(0,0,space1.width,space1.height);
        t1tx.font = "50px Arial";
        t1tx.strokeStyle="rgb(154,205,50)";
        t1tx.strokeText("TAKEN",36,50);
            
      } else if(datastream["current_value"] == '2'){
        var b1=document.getElementById("space4");
        var b1tx=b1.getContext("2d");
            
        b1tx.clearRect(0,0,space1.width,space1.height);
        b1tx.font = "50px Arial";
        b1tx.strokeStyle="rgb(154,205,50)";
        b1tx.strokeText("BOOKED",35,50);
      };
      
    xively.datastream.subscribe( feedID, datastream4ID, function ( event , datastream_updated ){
        
      if (datastream_updated["current_value"] == '0'){
        var f1=document.getElementById("space4");
        var f1tx=f1.getContext("2d");
            
        f1tx.clearRect(0,0,space1.width,space1.height);
        f1tx.font = "50px Arial";
        f1tx.strokeStyle="rgb(154,205,50)";
        f1tx.strokeText("FREE",36,50);
            
      } else if(datastream_updated["current_value"] == '1') {
        var t1=document.getElementById("space4");
        var t1tx=t1.getContext("2d");
            
        t1tx.clearRect(0,0,space1.width,space1.height);
        t1tx.font = "50px Arial";
        t1tx.strokeStyle="rgb(154,205,50)";
        t1tx.strokeText("TAKEN",36,50);
            
      } else if(datastream_updated["current_value"] == '2'){
        var b1=document.getElementById("space4");
        var b1tx=b1.getContext("2d");
            
        b1tx.clearRect(0,0,space1.width,space1.height);
        b1tx.font = "50px Arial";
        b1tx.strokeStyle="rgb(154,205,50)";
        b1tx.strokeText("BOOKED",36,50);
      };
      
    });
   });
      
   xively.datastream.get (feedID, datastream2ID, function ( datastream ){
    
       if (datastream["current_value"] == '0'){
        var f1=document.getElementById("space2");
        var f1tx=f1.getContext("2d");
            
        f1tx.clearRect(0,0,space1.width,space1.height);
        f1tx.font = "50px Arial";
        f1tx.strokeStyle="rgb(154,205,50)";
        f1tx.strokeText("FREE",36,50);
            
      } else if(datastream["current_value"] == '1') {
        var t1=document.getElementById("space2");
        var t1tx=t1.getContext("2d");
            
        t1tx.clearRect(0,0,space1.width,space1.height);
        t1tx.font = "50px Arial";
        t1tx.strokeStyle="rgb(154,205,50)";
        t1tx.strokeText("TAKEN",36,50);
            
      } else if(datastream["current_value"] == '2'){
        var b1=document.getElementById("space2");
        var b1tx=b1.getContext("2d");
            
        b1tx.clearRect(0,0,space1.width,space1.height);
        b1tx.font = "50px Arial";
        b1tx.strokeStyle="rgb(154,205,50)";
        b1tx.strokeText("BOOKED",35,50);
      };
      
    xively.datastream.subscribe( feedID, datastream2ID, function ( event , datastream_updated ){
        
      if (datastream_updated["current_value"] == '0'){
        var f1=document.getElementById("space2");
        var f1tx=f1.getContext("2d");
            
        f1tx.clearRect(0,0,space1.width,space1.height);
        f1tx.font = "50px Arial";
        f1tx.strokeStyle="rgb(154,205,50)";
        f1tx.strokeText("FREE",36,50);
            
      } else if(datastream_updated["current_value"] == '1') {
        var t1=document.getElementById("space2");
        var t1tx=t1.getContext("2d");
            
        t1tx.clearRect(0,0,space1.width,space1.height);
        t1tx.font = "50px Arial";
        t1tx.strokeStyle="rgb(154,205,50)";
        t1tx.strokeText("TAKEN",36,50);
            
      } else if(datastream_updated["current_value"] == '2'){
        var b1=document.getElementById("space2");
        var b1tx=b1.getContext("2d");
            
        b1tx.clearRect(0,0,space1.width,space1.height);
        b1tx.font = "50px Arial";
        b1tx.strokeStyle="rgb(154,205,50)";
        b1tx.strokeText("BOOKED",36,50);
      };
      
    });
   });
   
   xively.datastream.get (feedID, datastream5ID, function ( datastream ){
    
       if (datastream["current_value"] == '0'){
        var f1=document.getElementById("space5");
        var f1tx=f1.getContext("2d");
            
        f1tx.clearRect(0,0,space1.width,space1.height);
        f1tx.font = "50px Arial";
        f1tx.strokeStyle="rgb(154,205,50)";
        f1tx.strokeText("FREE",36,50);
            
      } else if(datastream["current_value"] == '1') {
        var t1=document.getElementById("space5");
        var t1tx=t1.getContext("2d");
            
        t1tx.clearRect(0,0,space1.width,space1.height);
        t1tx.font = "50px Arial";
        t1tx.strokeStyle="rgb(154,205,50)";
        t1tx.strokeText("TAKEN",36,50);
            
      } else if(datastream["current_value"] == '2'){
        var b1=document.getElementById("space5");
        var b1tx=b1.getContext("2d");
            
        b1tx.clearRect(0,0,space1.width,space1.height);
        b1tx.font = "50px Arial";
        b1tx.strokeStyle="rgb(154,205,50)";
        b1tx.strokeText("BOOKED",35,50);
      };
      
    xively.datastream.subscribe( feedID, datastream5ID, function ( event , datastream_updated ){
        
      if (datastream_updated["current_value"] == '0'){
        var f1=document.getElementById("space5");
        var f1tx=f1.getContext("2d");
            
        f1tx.clearRect(0,0,space1.width,space1.height);
        f1tx.font = "50px Arial";
        f1tx.strokeStyle="rgb(154,205,50)";
        f1tx.strokeText("FREE",36,50);
            
      } else if(datastream_updated["current_value"] == '1') {
        var t1=document.getElementById("space5");
        var t1tx=t1.getContext("2d");
            
        t1tx.clearRect(0,0,space1.width,space1.height);
        t1tx.font = "50px Arial";
        t1tx.strokeStyle="rgb(154,205,50)";
        t1tx.strokeText("TAKEN",36,50);
            
      } else if(datastream_updated["current_value"] == '2'){
        var b1=document.getElementById("space5");
        var b1tx=b1.getContext("2d");
            
        b1tx.clearRect(0,0,space1.width,space1.height);
        b1tx.font = "50px Arial";
        b1tx.strokeStyle="rgb(154,205,50)";
        b1tx.strokeText("BOOKED",36,50);
      };
      
    });
   });
    checkCredit1=function(){
      var enteredC1 = document.getElementById("hello1").value;
      var bookCode1 = enteredC1.substring(11, 5);
      var API_KEYc = "WpOOQ3ybilqsx42Abq9dbHgv50pr9kijh4iWtLipKRa9CsyL";
      var FEED_IDc = "2041803059";
      
      xively.setKey(API_KEYc);
      var timestamp = new Date().toISOString();
      var data = { "version" : "1.0.0",
            "datastreams" : [
               { "id" : "code1", "datapoints" : [ {"at" : timestamp, "value" : bookCode1} ] }
                ]
            };
      
      if (!isNaN(enteredC1)){
         if (enteredC1.length == 16){
            document.getElementById("book1").innerHTML = "thank";
            handleBook1();
            xively.feed.update(FEED_IDc, data, function(data){});
            document.getElementById("book1").innerHTML = "Your booking code is:" + bookCode1;
         } else {
            document.getElementById("book1").innerHTML = "nope";
         }
      }else{
         document.getElemenById("book1").innerHTML = "invalid";
      }
      
   }   
   
  function handleBook1(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor1,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
   function handleBook2(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor2,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook3(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor3,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook4(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor4,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook5(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor5,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook6(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor6,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook7(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor7,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook8(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor8,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook9(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor9,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook10(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor10,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook11(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor11,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
   
   function handleBook12(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor12,2',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
   }
      
  function bookToTaken1(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor1,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken2(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor2,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken3(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor3,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken4(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor4,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken5(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor5,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken6(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor6,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken7(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor7,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken8(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor8,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken9(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor9,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken10(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor10,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken11(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor11,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }
  
  function bookToTaken12(){
    $.ajax({
      url: 'https://api.xively.com/v2/feeds/1868918819.csv',
      type: 'PUT',
      data: 'Sensor12,1',
      headers: {'X-ApiKey': 'ywafB6MNLUakqggSfAgfrSaQoyRhPsbYbRVfuqVILy5ctgQr'}
    });
  }

});

   </script>
 
</body>
</html>
